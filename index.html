<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThemeGen - Advanced Website Theme Generator</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <header>
        <div class="header-left">
            <h1>ThemeGen</h1>
            <span id="theme-name" class="theme-name-badge">Random Theme</span>
        </div>
        <div class="header-controls">
            <button id="tour-btn" class="icon-btn" title="Start Tour">‚ùì</button>
            <button id="zen-mode-btn" class="icon-btn" title="Toggle Zen Mode">üßò</button>
            <button id="theme-toggle" class="icon-btn" title="Toggle Dark Mode">üåô</button>
            <button id="undo-btn" class="icon-btn" disabled title="Undo">‚Ü©</button>
            <button id="redo-btn" class="icon-btn" disabled title="Redo">‚Ü™</button>
        </div>
    </header>

    <!-- Zen Mode Exit Button -->
    <button id="exit-zen-btn" class="icon-btn" title="Exit Zen Mode" style="display: none; position: fixed; top: 1rem; right: 1rem; z-index: 3000;">‚úï</button>

    <main>
        <!-- Control Panel -->
        <aside class="panel control-panel">
            <h2>Controls</h2>
            
            <div class="control-group">
                <label for="palette-mode">Palette Mode</label>
                <select id="palette-mode">
                    <option value="random">Random</option>
                    <option value="monochromatic">Monochromatic</option>
                    <option value="complementary">Complementary</option>
                    <option value="triadic">Triadic</option>
                </select>
            </div>

            <div class="control-group">
                <label>Image to Theme</label>
                <input type="file" id="image-upload" accept="image/*" style="width: 100%;">
            </div>

            <div class="control-group">
                <label>Magic Keyword</label>
                <input type="text" id="magic-keyword" placeholder="e.g. Fire, Ocean, Forest">
            </div>

            </div>

            <button id="generate-btn" class="primary-btn">Generate New Theme</button>
            <button id="save-theme-btn" class="secondary-btn" style="margin-top: 0.5rem;">Save Current Theme</button>
            
            <div class="control-group" style="margin-top: 0.5rem;">
                <label>Brand Card</label>
                <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <select id="brand-card-size" style="flex: 1;">
                        <option value="standard">Standard (800x600)</option>
                        <option value="story">Instagram Story (1080x1920)</option>
                        <option value="post">Social Post (1080x1080)</option>
                    </select>
                </div>
                <button id="download-brand-card-btn" class="secondary-btn" style="width: 100%;">Download Brand Card</button>
            </div>
            
            <hr>

            <div class="control-group">
                <label>Vibe Check</label>
                <div class="slider-group">
                    <label for="sat-slider">Saturation</label>
                    <input type="range" id="sat-slider" min="-50" max="50" value="0">
                </div>
                <div class="slider-group">
                    <label for="bright-slider">Brightness</label>
                    <input type="range" id="bright-slider" min="-50" max="50" value="0">
                </div>
            </div>
            
            <hr>
            
            <div class="control-group">
                <label>Current Colors</label>
                <div class="contrast-checker">
                    <span>Contrast Ratio: <span id="contrast-ratio">--</span></span>
                    <span id="contrast-badge" class="badge">--</span>
                    <button id="fix-contrast-btn" class="btn-small" style="display: none;" title="Auto-fix contrast">Auto-Fix</button>
                </div>
                <div id="color-swatches">
                    <!-- Swatches will go here -->
                </div>
            </div>

            <hr>

            <div class="control-group">
                <label>Typography</label>
                <div class="font-control">
                    <label>Heading</label>
                    <div class="font-display">
                        <span id="heading-font-name">Roboto</span>
                        <button class="lock-btn" id="lock-heading-btn" title="Lock Heading Font">üîì</button>
                    </div>
                </div>
                <div class="font-control" style="margin-top: 0.5rem;">
                    <label>Body</label>
                    <div class="font-display">
                        <span id="body-font-name">Open Sans</span>
                        <button class="lock-btn" id="lock-body-btn" title="Lock Body Font">üîì</button>
                    </div>
                </div>
                <div class="font-control" style="margin-top: 0.5rem;">
                    <label>Type Scale</label>
                    <select id="type-scale">
                        <option value="1.2">Minor Third (1.200)</option>
                        <option value="1.25" selected>Major Third (1.250)</option>
                        <option value="1.333">Perfect Fourth (1.333)</option>
                        <option value="1.414">Augmented Fourth (1.414)</option>
                        <option value="1.5">Perfect Fifth (1.500)</option>
                        <option value="1.618">Golden Ratio (1.618)</option>
                    </select>
                </div>
                <div class="control-group" style="margin-top: 0.5rem;">
                    <label>Custom Font (WOFF/TTF)</label>
                    <input type="file" id="font-upload" accept=".woff,.woff2,.ttf,.otf">
                </div>
            </div>

            <hr>

            <div class="control-group">
                <label>Saved Themes</label>
                <div id="saved-themes-list">
                    <!-- Saved themes will appear here -->
                    <div class="empty-state">No saved themes yet.</div>
                </div>
            </div>
        </aside>

        <!-- Preview Area -->
        <section class="preview-container">
            <div class="preview-controls">
                <select id="preview-layout">
                    <option value="landing">Landing Page</option>
                    <option value="dashboard">Dashboard</option>
                    <option value="blog">Blog Post</option>
                    <option value="ecommerce">E-commerce</option>
                </select>
                <select id="vision-simulator">
                    <option value="normal">Normal Vision</option>
                    <option value="protanopia">Protanopia (Red-Blind)</option>
                    <option value="deuteranopia">Deuteranopia (Green-Blind)</option>
                    <option value="tritanopia">Tritanopia (Blue-Blind)</option>
                    <option value="achromatopsia">Achromatopsia (Monochromacy)</option>
                </select>
            </div>
            
            <div id="preview-frame-wrapper">
                <div id="preview-frame" class="layout-landing">
                    <!-- Content injected by JS based on layout -->
                </div>
                <div class="control-group">
                    <label>Focus Ring</label>
                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                        <input type="color" id="focus-color" value="#3b82f6">
                        <select id="focus-style">
                            <option value="solid">Solid</option>
                            <option value="dashed">Dashed</option>
                            <option value="dotted">Dotted</option>
                            <option value="double">Double</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <!-- Output Panel -->
        <aside class="panel output-panel">
            <h2>Output</h2>
            
            <div class="control-group">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="json">JSON</button>
                    <button class="tab-btn" data-tab="css">CSS</button>
                    <button class="tab-btn" data-tab="scss">SCSS</button>
                    <button class="tab-btn" data-tab="tailwind">Tailwind</button>
                    <button class="tab-btn" data-tab="figma">Figma</button>
                    <button class="tab-btn" data-tab="react">React</button>
                </div>
                <textarea id="code-output" readonly></textarea>
                <button id="copy-code-btn" class="secondary-btn">Copy Code</button>
            </div>

            <div class="control-group">
                <label>CSS Gradient</label>
                <div id="gradient-preview" style="height: 40px; border-radius: 4px; margin-bottom: 0.5rem; border: 1px solid #ddd;"></div>
                <textarea id="gradient-output" readonly style="height: 60px;"></textarea>
                <button id="copy-gradient-btn" class="secondary-btn">Copy Gradient</button>
            </div>

            <div class="control-group">
                <label>LLM Prompt</label>
                <textarea id="prompt-output" readonly></textarea>
                <button id="copy-prompt-btn" class="secondary-btn">Copy Prompt</button>
            </div>
            
            <div class="control-group">
                <label>Share Link</label>
                <input type="text" id="share-link" readonly>
                <button id="copy-link-btn" class="secondary-btn">Copy Link</button>
            </div>
        </aside>
    </main>
    
    <footer>
        Created by <a href="https://alexmerced.com" target="_blank">AlexMerced</a>
    </footer>

    <div id="toast-container"></div>

    <!-- Code Snippet Modal -->
    <div id="snippet-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Component Code</h3>
            <p>Copy this code to use this component with your theme.</p>
            <textarea id="snippet-code" readonly></textarea>
            <button id="copy-snippet-btn" class="primary-btn">Copy Snippet</button>
        </div>
    </div>

    <!-- SVG Filters for Color Blindness -->
    <svg style="display: none;">
        <defs>
            <filter id="protanopia">
                <feColorMatrix type="matrix" values="0.567, 0.433, 0, 0, 0  0.558, 0.442, 0, 0, 0  0, 0.242, 0.758, 0, 0  0, 0, 0, 1, 0"/>
            </filter>
            <filter id="deuteranopia">
                <feColorMatrix type="matrix" values="0.625, 0.375, 0, 0, 0  0.7, 0.3, 0, 0, 0  0, 0.3, 0.7, 0, 0  0, 0, 0, 1, 0"/>
            </filter>
            <filter id="tritanopia">
                <feColorMatrix type="matrix" values="0.95, 0.05, 0, 0, 0  0, 0.433, 0.567, 0, 0  0, 0.475, 0.525, 0, 0  0, 0, 0, 1, 0"/>
            </filter>
            <filter id="achromatopsia">
                <feColorMatrix type="matrix" values="0.299, 0.587, 0.114, 0, 0  0.299, 0.587, 0.114, 0, 0  0.299, 0.587, 0.114, 0, 0  0, 0, 0, 1, 0"/>
            </filter>
        </defs>
    </svg>

    <!-- Tour Elements -->
    <div id="tour-overlay" class="tour-overlay" style="display: none;"></div>
    <div id="tour-box" class="tour-box" style="display: none;">
        <h3 id="tour-title">Tour Title</h3>
        <p id="tour-desc">Tour description goes here.</p>
        <div class="tour-controls">
            <button id="tour-skip" class="secondary-btn small">Skip</button>
            <button id="tour-next" class="primary-btn small">Next</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
